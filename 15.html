<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INDEX_ECONYX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            margin: 0;
            background-color: #0a0a0a;
            color: #a3a3a3;
            font-family: monospace;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;

        // --- ICONS ---
        const IconWrapper = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Play = (props) => <IconWrapper {...props}><polygon points="5 3 19 12 5 21 5 3"></polygon></IconWrapper>;
        const Pause = (props) => <IconWrapper {...props}><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></IconWrapper>;
        const Database = (props) => <IconWrapper {...props}><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s 9-1.34 9-3V5"></path></IconWrapper>;
        const Target = (props) => <IconWrapper {...props}><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></IconWrapper>;
        const Shield = (props) => <IconWrapper {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></IconWrapper>;
        const Shuffle = (props) => <IconWrapper {...props}><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></IconWrapper>;
        const Terminal = (props) => <IconWrapper {...props}><polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line></IconWrapper>;
        const Globe = (props) => <IconWrapper {...props}><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></IconWrapper>;
        const Lock = (props) => <IconWrapper {...props}><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></IconWrapper>;
        const Unlock = (props) => <IconWrapper {...props}><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path></IconWrapper>;
        const SkipForward = (props) => <IconWrapper {...props}><polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line></IconWrapper>;
        const Clock = (props) => <IconWrapper {...props}><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></IconWrapper>;
        const Search = (props) => <IconWrapper {...props}><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></IconWrapper>;
        const Menu = (props) => <IconWrapper {...props}><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></IconWrapper>;
        const X = (props) => <IconWrapper {...props}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></IconWrapper>;
        const BookOpen = (props) => <IconWrapper {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></IconWrapper>;
        const Activity = (props) => <IconWrapper {...props}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></IconWrapper>;
        const Zap = (props) => <IconWrapper {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></IconWrapper>;
        const MousePointer2 = (props) => <IconWrapper {...props}><path d="m12 6 2-2 2 2"></path><path d="M8 12h8"></path><path d="m12 18-2 2-2-2"></path></IconWrapper>;

        // --- Configuration: Reduced Density for Better Legibility ---
        const GRID_ROWS = 10;
        const GRID_COLS = 12;

        // --- Text Banks (The "Pre-Hallucinated" Latent Space) ---
        const LEXICON = {
            DEFAULT: {
                adjectives: ['DORMANT', 'STATIC', 'NULL', 'WAITING', 'SILENT', 'GREY'],
                nouns: ['ZONE', 'SECTOR', 'VOID', 'GRID', 'BUFFER', 'INDEX'],
                verbs: ['EXISTS', 'HUMS', 'WAITS', 'LOOPS', 'IDLES']
            },
            ECO_FOREST: {
                adjectives: ['MOSS-LADEN', 'SPORE-FILLED', 'TANGLING', 'VIBRANT', 'DECAYING', 'RHIZOMATIC'],
                nouns: ['LICHEN', 'FERN-DATA', 'MYCELIUM', 'CANOPY', 'ROOT-LOGIC', 'BIOMASS'],
                verbs: ['WEAVES', 'BREATHES', 'EXPANDS', 'ROTS', 'BLOOMS']
            },
            ECO_OCEAN: {
                adjectives: ['DRIFTING', 'TIDAL', 'SUBMERGED', 'FLUID', 'ABYSSAL', 'COLD'],
                nouns: ['CURRENT', 'ALGAE', 'DEPTH-DATA', 'PRESSURE', 'WAVEFORM', 'KELP-STRING'],
                verbs: ['FLOWS', 'SINKS', 'SWIRLS', 'CRASHES', 'DISSOLVES']
            },
            VECTOR_OBSTACLE: {
                adjectives: ['CALCIFIED', 'FROZEN', 'HARDENED', 'IMPASSABLE', 'REJECTED', 'DENSE'],
                nouns: ['BARRIER', 'WALL', 'ERROR-STATE', 'BLOCKAGE', 'SHARD', 'GLITCH'],
                verbs: ['HALTS', 'DENIES', 'BLOCKS', 'REFUSES', 'RESISTS']
            },
            VECTOR_GOAL: {
                adjectives: ['RADIANT', 'SEEKING', 'GOLDEN', 'MAGNETIC', 'DESIRED', 'PULLING'],
                nouns: ['ATTRACTOR', 'BEACON', 'CORE', 'DESTINY', 'VECTOR-POINT', 'NEXUS'],
                verbs: ['SUMMONS', 'GUIDES', 'PULLS', 'CALLS', 'TARGETS']
            },
            VECTOR_SHIFT: {
                adjectives: ['MUTATING', 'UNSTABLE', 'BLEEDING', 'HYBRID', 'VOLATILE', 'SHIFTING'],
                nouns: ['FLUX', 'MORPH', 'TRANSITION', 'NOISE', 'ENTROPY', 'HAZE'],
                verbs: ['WARPS', 'TEARS', 'REWRITES', 'MELDS', 'VIBRATES']
            }
        };

        // --- Helper Functions ---
        const generateWorldText = (type, bleedFactor = 0) => {
            let source = LEXICON[type] || LEXICON.DEFAULT;
            if (bleedFactor > 0 && Math.random() < bleedFactor) {
                const keys = Object.keys(LEXICON);
                const randomKey = keys[Math.floor(Math.random() * keys.length)];
                source = LEXICON[randomKey];
            }
            const adj = source.adjectives[Math.floor(Math.random() * source.adjectives.length)];
            const noun = source.nouns[Math.floor(Math.random() * source.nouns.length)];
            const verb = source.verbs[Math.floor(Math.random() * source.verbs.length)];
            return `${noun} ${verb} ${adj}`;
        };

        const getNeighbors = (r, c) => [[r - 1, c], [r + 1, c], [r, c - 1], [r, c + 1]];

        const getCellContent = (cell, isRevealed, cycle) => {
            if (!isRevealed) {
                const glpyhs = '░▒▓█';
                return glpyhs[(cell.r + cell.c + cycle) % glpyhs.length].repeat(3);
            }
            return cell.text;
        };

        const getCellColor = (type, isRevealed) => {
            if (!isRevealed) return 'text-neutral-800';
            switch (type) {
                case 'ECO_FOREST': return 'text-emerald-400';
                case 'ECO_OCEAN': return 'text-sky-400';
                case 'VECTOR_OBSTACLE': return 'text-rose-500 font-bold';
                case 'VECTOR_GOAL': return 'text-amber-400 font-bold';
                case 'VECTOR_SHIFT': return 'text-fuchsia-400 animate-pulse';
                default: return 'text-neutral-400';
            }
        };

        function App() {
            const [grid, setGrid] = useState([]);
            const [hoverCell, setHoverCell] = useState(null);
            const [activeVector, setActiveVector] = useState(null);
            const [mode, setMode] = useState('SUPERVISED');
            const [bleedLevel, setBleedLevel] = useState(0);
            const [cycle, setCycle] = useState(0);
            const [log, setLog] = useState(['SYSTEM READY', 'LATENT SPACE INITIALIZED']);
            const [isPaused, setIsPaused] = useState(false);
            const [simSpeed, setSimSpeed] = useState(150);
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            const [showManual, setShowManual] = useState(false);

            const gridRef = useRef(null);

            // Initialize Grid
            useEffect(() => {
                const newGrid = [];
                for (let r = 0; r < GRID_ROWS; r++) {
                    const row = [];
                    for (let c = 0; c < GRID_COLS; c++) {
                        const isOcean = Math.sin(r * 0.5) + Math.cos(c * 0.5) > 0.5;
                        const type = isOcean ? 'ECO_OCEAN' : 'ECO_FOREST';
                        row.push({ r, c, currentType: type, text: generateWorldText(type) });
                    }
                    newGrid.push(row);
                }
                setGrid(newGrid);
            }, []);

            const runSimulationStep = useCallback(() => {
                setCycle(c => c + 1);
                setGrid(prevGrid => {
                    if (!prevGrid.length) return prevGrid;
                    const nextGrid = prevGrid.map(row => row.map(cell => ({ ...cell })));

                    if (mode === 'UNSUPERVISED') {
                        for (let i = 0; i < 3; i++) {
                            const r = Math.floor(Math.random() * GRID_ROWS);
                            const c = Math.floor(Math.random() * GRID_COLS);
                            const cell = nextGrid[r][c];
                            const neighbors = getNeighbors(r, c);
                            neighbors.forEach(([nr, nc]) => {
                                if (nextGrid[nr]?.[nc]) {
                                    if (cell.currentType === 'VECTOR_OBSTACLE' && Math.random() > 0.94) {
                                        nextGrid[nr][nc].currentType = 'VECTOR_OBSTACLE';
                                        nextGrid[nr][nc].text = generateWorldText('VECTOR_OBSTACLE');
                                    }
                                    if (cell.currentType === 'VECTOR_SHIFT' && Math.random() > 0.88) {
                                        nextGrid[nr][nc].currentType = 'VECTOR_SHIFT';
                                        nextGrid[nr][nc].text = generateWorldText('VECTOR_SHIFT', bleedLevel + 0.5);
                                    }
                                }
                            });
                        }
                    }

                    const driftRate = mode === 'UNSUPERVISED' ? 30 : 5;
                    for (let i = 0; i < driftRate; i++) {
                        const r = Math.floor(Math.random() * GRID_ROWS);
                        const c = Math.floor(Math.random() * GRID_COLS);
                        const cell = nextGrid[r][c];
                        if (cell.currentType !== 'VECTOR_OBSTACLE') {
                            cell.text = generateWorldText(cell.currentType, bleedLevel);
                        }
                    }
                    return nextGrid;
                });
            }, [mode, bleedLevel]);

            useEffect(() => {
                if (isPaused) return;
                const interval = setInterval(() => runSimulationStep(), simSpeed);
                return () => clearInterval(interval);
            }, [isPaused, simSpeed, runSimulationStep]);

            const handleMouseEnter = (r, c) => setHoverCell({ r, c });
            const handleMouseLeave = () => setHoverCell(null);

            const handleTouchMove = (e) => {
                if (!gridRef.current) return;
                const touch = e.touches[0];
                const element = document.elementFromPoint(touch.clientX, touch.clientY);
                if (element && element.dataset.row && element.dataset.col) {
                    setHoverCell({ r: parseInt(element.dataset.row), c: parseInt(element.dataset.col) });
                }
            };

            const handleCellClick = (r, c) => {
                if (!activeVector) return;
                setGrid(prev => {
                    const next = prev.map(row => row.map(cell => ({ ...cell })));
                    const cell = next[r][c];
                    let newType = activeVector === 'GOAL' ? 'VECTOR_GOAL' : activeVector === 'OBSTACLE' ? 'VECTOR_OBSTACLE' : 'VECTOR_SHIFT';
                    if (activeVector === 'SHIFT') setBleedLevel(b => Math.min(b + 0.1, 1.0));
                    cell.currentType = newType;
                    cell.text = generateWorldText(newType, bleedLevel);
                    addLog(`${activeVector} APPLIED TO [${r},${c}]`);
                    return next;
                });
            };

            const addLog = (msg) => setLog(prev => [`> ${msg}`, ...prev].slice(0, 8));

            return (
                <div className="flex flex-col h-screen w-full bg-neutral-950 text-neutral-400 font-mono select-none overflow-hidden">
                    {/* --- HUD HEADER --- */}
                    <header className="h-14 border-b border-neutral-800 flex items-center justify-between px-6 bg-black z-30">
                        <div className="flex items-center gap-4">
                            <div className="p-2 bg-emerald-500/10 rounded">
                                <Globe className={`w-5 h-5 ${mode === 'UNSUPERVISED' ? 'text-rose-500 animate-spin' : 'text-emerald-500'}`} />
                            </div>
                            <div>
                                <h1 className="text-white font-bold tracking-[0.2em] text-sm">INDEX_ECONYX</h1>
                                <div className="flex gap-3 text-[10px] items-center">
                                    <span className={isPaused ? 'text-amber-500' : 'text-emerald-500'}>● {isPaused ? 'PAUSED' : 'LIVE'}</span>
                                    <span className="text-neutral-600">CYCLE: {cycle}</span>
                                </div>
                            </div>
                        </div>

                        <div className="flex items-center gap-6">
                            <button onClick={() => setShowManual(true)} className="flex items-center gap-2 px-3 py-1.5 border border-neutral-700 rounded-md hover:bg-neutral-800 hover:text-white transition-all text-xs">
                                <BookOpen className="w-4 h-4" />
                                <span className="hidden sm:inline">HELP / MANUAL</span>
                            </button>

                            <button className="md:hidden p-2 text-white" onClick={() => setMobileMenuOpen(!mobileMenuOpen)}>
                                {mobileMenuOpen ? <X /> : <Menu />}
                            </button>
                        </div>
                    </header>

                    {/* --- MANUAL MODAL --- */}
                    {showManual && (
                        <div className="fixed inset-0 z-[100] bg-black/95 flex items-center justify-center p-6 backdrop-blur-sm">
                            <div className="bg-neutral-900 border border-neutral-700 w-full max-w-xl flex flex-col shadow-2xl rounded-lg overflow-hidden">
                                <div className="p-5 border-b border-neutral-800 flex justify-between items-center">
                                    <h2 className="text-emerald-500 font-bold tracking-widest text-lg">OPERATOR MANUAL</h2>
                                    <button onClick={() => setShowManual(false)} className="text-neutral-500 hover:text-white p-2">
                                        <X />
                                    </button>
                                </div>
                                <div className="p-8 overflow-y-auto space-y-6 text-sm text-neutral-300">
                                    <div>
                                        <h3 className="text-white font-bold mb-2 flex items-center gap-2">
                                            <MousePointer2 className="w-4 h-4 text-emerald-500" /> EXPLORATION
                                        </h3>
                                        <p>Hover your cursor (or drag your finger) over the dark grid to reveal the hidden "Worldtext" of this ecology.</p>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="p-4 bg-black/50 border border-neutral-800 rounded">
                                            <span className="text-emerald-500 font-bold block mb-1">SUPERVISED</span>
                                            <p className="text-[11px] text-neutral-400">Manual control. The system only reacts to your specific injections.</p>
                                        </div>
                                        <div className="p-4 bg-black/50 border border-neutral-800 rounded">
                                            <span className="text-rose-500 font-bold block mb-1">UNSUPERVISED</span>
                                            <p className="text-[11px] text-neutral-400">Autonomous drift. Descriptions evolve and spread based on neighbor logic.</p>
                                        </div>
                                    </div>
                                    <div>
                                        <h3 className="text-white font-bold mb-2 flex items-center gap-2">
                                            <Zap className="w-4 h-4 text-amber-500" /> INJECTION
                                        </h3>
                                        <p>Select a tool (Goal, Wall, or Shift) and click a revealed cell to rewrite that sector's reality.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* --- MAIN LAYOUT --- */}
                    <main className="flex-1 flex flex-col md:flex-row overflow-hidden relative">

                        {/* WORLDTEXT GRID */}
                        <div
                            className="flex-1 bg-black p-4 grid gap-1 overflow-hidden relative touch-none"
                            style={{ gridTemplateColumns: `repeat(${GRID_COLS}, 1fr)`, gridTemplateRows: `repeat(${GRID_ROWS}, 1fr)` }}
                            ref={gridRef}
                            onTouchMove={handleTouchMove}
                            onTouchEnd={() => setHoverCell(null)}
                        >
                            {grid.map((row, r) => row.map((cell, c) => {
                                const isHovered = hoverCell && Math.sqrt(Math.pow(hoverCell.r - r, 2) + Math.pow(hoverCell.c - c, 2)) < 1.8;
                                const isRevealed = mode === 'UNSUPERVISED' || isHovered;
                                return (
                                    <div
                                        key={`${r}-${c}`}
                                        data-row={r}
                                        data-col={c}
                                        onMouseEnter={() => handleMouseEnter(r, c)}
                                        onMouseLeave={handleMouseLeave}
                                        onClick={() => handleCellClick(r, c)}
                                        className={`flex items-center justify-center text-center transition-all duration-300 border border-neutral-900/40 rounded-sm overflow-hidden
                                            ${getCellColor(cell.currentType, isRevealed)}
                                            ${isHovered ? 'bg-neutral-800/30 scale-105 z-10' : ''}
                                            ${activeVector && isHovered ? 'cursor-crosshair border-white/20' : ''}`}
                                        style={{
                                            fontSize: isRevealed ? '13px' : '10px',
                                            textShadow: isRevealed ? `0 0 10px currentColor` : 'none'
                                        }}
                                    >
                                        <span className="leading-tight px-1 uppercase tracking-tight">
                                            {getCellContent(cell, isRevealed, cycle)}
                                        </span>
                                    </div>
                                );
                            }))}
                        </div>

                        {/* SIDEBAR */}
                        <aside className={`${mobileMenuOpen ? 'flex' : 'hidden'} md:flex flex-col absolute md:relative inset-0 md:inset-auto z-40 bg-neutral-900 md:w-72 border-l border-neutral-800 shadow-2xl`}>
                            <div className="md:hidden flex justify-end p-4">
                                <button onClick={() => setMobileMenuOpen(false)}>
                                    <X className="w-6 h-6" />
                                </button>
                            </div>

                            {/* TEMPORAL */}
                            <div className="p-5 border-b border-neutral-800">
                                <h2 className="text-[11px] text-neutral-500 mb-3 flex items-center gap-2 uppercase tracking-widest">
                                    <Clock className="w-4 h-4" /> Temporal Flow
                                </h2>
                                <div className="flex items-center gap-2 mb-4">
                                    <button onClick={() => setIsPaused(!isPaused)} className={`flex-1 py-3 flex items-center justify-center gap-2 border rounded-md transition-all ${isPaused ? 'border-amber-500 text-amber-500 bg-amber-500/10' : 'border-neutral-700 text-neutral-400 hover:bg-neutral-800'}`}>
                                        {isPaused ? <Play className="w-4 h-4 fill-current" /> : <Pause className="w-4 h-4 fill-current" />}
                                        <span className="font-bold">{isPaused ? 'RESUME' : 'PAUSE'}</span>
                                    </button>
                                    <button onClick={runSimulationStep} disabled={!isPaused} className="p-3 border border-neutral-700 rounded-md text-neutral-400 disabled:opacity-20 hover:bg-neutral-800">
                                        <SkipForward className="w-5 h-5" />
                                    </button>
                                </div>
                                <div className="space-y-2">
                                    <div className="flex justify-between text-[10px] text-neutral-500"><span>SPEED: {1000 - simSpeed}ms</span></div>
                                    <input type="range" min="50" max="950" step="50" value={simSpeed} onChange={(e) => setSimSpeed(Number(e.target.value))} className="w-full h-1 bg-neutral-800 rounded-lg appearance-none accent-emerald-500" />
                                </div>
                            </div>

                            {/* TOOLS */}
                            <div className="p-5 border-b border-neutral-800">
                                <h2 className="text-[11px] text-neutral-500 mb-4 flex items-center gap-2 uppercase tracking-widest">
                                    <Terminal className="w-4 h-4" /> Logic Control
                                </h2>
                                <button onClick={() => setMode(m => m === 'SUPERVISED' ? 'UNSUPERVISED' : 'SUPERVISED')} className={`w-full flex items-center justify-between px-4 py-3 border rounded-md transition-all font-bold ${mode === 'SUPERVISED' ? 'border-emerald-500/50 text-emerald-400 bg-emerald-500/5' : 'border-rose-500/50 text-rose-400 bg-rose-500/5'}`}>
                                    <span className="text-xs tracking-widest">{mode}</span>
                                    {mode === 'SUPERVISED' ? <Lock className="w-4 h-4" /> : <Unlock className="w-4 h-4" />}
                                </button>

                                <div className="grid grid-cols-3 gap-2 mt-4">
                                    <button onClick={() => setActiveVector('GOAL')} className={`p-3 border rounded-md flex flex-col items-center gap-2 transition-all ${activeVector === 'GOAL' ? 'border-amber-500 text-amber-500 bg-amber-500/10 shadow-[0_0_10px_rgba(245,158,11,0.2)]' : 'border-neutral-700 text-neutral-500 hover:border-neutral-500'}`}>
                                        <Target className="w-5 h-5" /><span className="text-[9px] font-bold">GOAL</span>
                                    </button>
                                    <button onClick={() => setActiveVector('OBSTACLE')} className={`p-3 border rounded-md flex flex-col items-center gap-2 transition-all ${activeVector === 'OBSTACLE' ? 'border-rose-500 text-rose-500 bg-rose-500/10 shadow-[0_0_10px_rgba(244,63,94,0.2)]' : 'border-neutral-700 text-neutral-500 hover:border-neutral-500'}`}>
                                        <Shield className="w-5 h-5" /><span className="text-[9px] font-bold">WALL</span>
                                    </button>
                                    <button onClick={() => setActiveVector('SHIFT')} className={`p-3 border rounded-md flex flex-col items-center gap-2 transition-all ${activeVector === 'SHIFT' ? 'border-fuchsia-500 text-fuchsia-500 bg-fuchsia-500/10 shadow-[0_0_10px_rgba(217,70,239,0.2)]' : 'border-neutral-700 text-neutral-500 hover:border-neutral-500'}`}>
                                        <Shuffle className="w-5 h-5" /><span className="text-[9px] font-bold">SHIFT</span>
                                    </button>
                                </div>
                            </div>

                            {/* INSPECTOR */}
                            <div className="flex-1 flex flex-col overflow-hidden bg-black/40 font-mono min-h-[150px]">
                                {hoverCell ? (
                                    <div className="flex-1 p-5 animate-in fade-in slide-in-from-bottom-2 duration-300">
                                        <div className="flex items-center gap-2 text-sky-400 mb-4 border-b border-neutral-800 pb-2">
                                            <Search className="w-4 h-4" /> <span className="text-[10px] font-bold tracking-widest uppercase">Cell Analysis</span>
                                        </div>
                                        <div className="space-y-4">
                                            <div className="flex justify-between items-end"><span className="text-[10px] text-neutral-600">VECTOR_MAP</span><span className="text-xs text-white">[{hoverCell.r}, {hoverCell.c}]</span></div>
                                            <div className="flex justify-between items-end"><span className="text-[10px] text-neutral-600">TYPE_TAG</span><span className="text-xs text-emerald-400 uppercase tracking-tighter">{grid[hoverCell.r]?.[hoverCell.c]?.currentType.replace('ECO_', '')}</span></div>
                                            <div className="pt-3 border-t border-neutral-900">
                                                <span className="text-[10px] text-neutral-600 block mb-2 uppercase">Current Description:</span>
                                                <div className="text-sm text-neutral-200 leading-relaxed italic border-l-2 border-emerald-500 pl-3">
                                                    "{grid[hoverCell.r]?.[hoverCell.c]?.text}"
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                ) : (
                                    <div className="flex-1 flex flex-col p-5">
                                        <div className="text-[10px] text-neutral-600 uppercase tracking-widest mb-4 flex justify-between items-center">
                                            <span>System Logs</span>
                                            <Database className="w-4 h-4" />
                                        </div>
                                        <div className="flex-1 space-y-2 overflow-y-auto">
                                            {log.map((entry, i) => <div key={i} className="text-[10px] text-neutral-500 pl-2 border-l border-neutral-800">{entry}</div>)}
                                        </div>
                                        <div className="mt-4 pt-4 border-t border-neutral-800 text-[9px] text-neutral-700 italic">
                                            Waiting for operator input...
                                        </div>
                                    </div>
                                )}
                            </div>
                        </aside>

                        {/* MOBILE VECTOR BAR */}
                        {!mobileMenuOpen && (
                            <div className="md:hidden h-16 bg-neutral-900 border-t border-neutral-800 flex items-center justify-around px-4 z-20">
                                <button onClick={() => setActiveVector('GOAL')} className={`p-3 rounded-full border transition-all ${activeVector === 'GOAL' ? 'border-amber-500 bg-amber-500/20' : 'border-neutral-800'}`}>
                                    <Target className="w-6 h-6 text-amber-500" />
                                </button>
                                <button onClick={() => setActiveVector('OBSTACLE')} className={`p-3 rounded-full border transition-all ${activeVector === 'OBSTACLE' ? 'border-rose-500 bg-rose-500/20' : 'border-neutral-800'}`}>
                                    <Shield className="w-6 h-6 text-rose-500" />
                                </button>
                                <button onClick={() => setActiveVector('SHIFT')} className={`p-3 rounded-full border transition-all ${activeVector === 'SHIFT' ? 'border-fuchsia-500 bg-fuchsia-500/20' : 'border-neutral-800'}`}>
                                    <Shuffle className="w-6 h-6 text-fuchsia-500" />
                                </button>
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>